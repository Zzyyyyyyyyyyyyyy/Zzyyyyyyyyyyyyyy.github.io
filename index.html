<!DOCTYPE html>
<html lang="en">
<head>
    <script>
        // Enhanced anti-FOUC and intro control
        (function() {
            // Disable transitions during initial load to prevent flicker
            document.documentElement.classList.add('no-transitions');
            
            // Immediately hide intro if already shown
            if (sessionStorage.getItem('introShown') === '1') {
                document.documentElement.classList.add('skip-intro');
            }
            
            // Apply dark theme immediately
            document.documentElement.style.backgroundColor = '#0D0C0E';
            if (document.body) {
                document.body.style.backgroundColor = '#0D0C0E';
            }
            
            // Re-enable transitions after DOM is ready
            document.addEventListener('DOMContentLoaded', function() {
                setTimeout(function() {
                    document.documentElement.classList.remove('no-transitions');
                }, 100);
            });
        })();
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Z's Portfolio</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="https://api.fontshare.com/v2/css?f[]=clash-display@400,500,600,700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollToPlugin.min.js"></script>
    </head>
<body class="page-index">
    <!-- 添加覆盖层 -->
    <div class="page-cover" id="pageCover">
        <div class="cover-half cover-top" id="coverTop"></div>
        <div class="cover-half cover-bottom" id="coverBottom"></div>
        <div class="cover-message" id="coverMessage">See through my eyes</div>
        <!-- Cover页面中的"Z's WORLD"文本部分 - 主要的品牌标识和交互元素 -->
        <div class="cover-name-container" id="coverNameContainer">
            <!-- 添加透明覆盖层以确保整个区域可点击 -->
            <div class="clickable-overlay"></div>
            <!-- "THIS"文本元素 -->
            <div class="this-is">THIS</div>
            <!-- "IS"文本元素 -->
            <div class="is">IS</div>
            <!-- "Z's WORLD"文本元素 - 网站主标题 -->
            <div class="world">
                <span class="char" style="--char-index: 0; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">Z</span>
                <span class="char" style="--char-index: 1; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">'</span>
                <span class="char" style="--char-index: 2; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">s</span>
                <span class="char" style="--char-index: 3; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);"> </span>
                <span class="char" style="--char-index: 4; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">W</span>
                <span class="char" style="--char-index: 5; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">O</span>
                <span class="char" style="--char-index: 6; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">R</span>
                <span class="char" style="--char-index: 7; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">L</span>
                <span class="char" style="--char-index: 8; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">D</span>
                <div class="interaction-hint"></div>
            </div>
        </div>
    </div>
    
    <!-- Navigation Bar -->
    <div class="navbar-container">
        <nav class="navbar">
            <a href="#" class="logo" style="cursor: pointer !important;">
                <img src="Z_s_icon.png" alt="Logo">
            </a>
            
            <div class="nav-links">
                <a href="#" class="active">Home</a>
                <a href="About ME.html">About Me</a>
                <a href="works.html">Works</a>
                <a href="Contact.html">Contact</a>
            </div>
        </nav>
    </div>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="social-links">
            <a href="#" class="social-btn" id="instagram">
                <i class="fab fa-instagram"></i>
            </a>
            <a href="#" class="social-btn" id="linkedin">
                <i class="fab fa-linkedin-in"></i>
            </a>
        </div>
        
        <div class="hero-content">
            <!-- Z's WORLD元素 -->
            <div class="main-title">
                <div class="world-title" role="banner" aria-label="Z's World - Main Branding">
                    <span class="char" style="--char-index: 0; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">Z</span>
                    <span class="char" style="--char-index: 1; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">'</span>
                    <span class="char" style="--char-index: 2; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">s</span>
                    <span class="char" style="--char-index: 3; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);"> </span>
                    <span class="char" style="--char-index: 4; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">W</span>
                    <span class="char" style="--char-index: 5; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">O</span>
                    <span class="char" style="--char-index: 6; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">R</span>
                    <span class="char" style="--char-index: 7; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">L</span>
                    <span class="char" style="--char-index: 8; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">D</span>
                </div>
            </div>
            
            <div class="info-grid">
                <div class="title-highlight">
                    Interaction Designer<br>
                    AI-Driven Designer
                </div>
                <div class="location">
                    Interactive Designer<br>
                    Product Manager<br>
                    <span style="font-size: 0.9rem;">Based in <strong>NYC</strong></span>
                </div>
                <div class="roles">
                    <!-- 删除Bridging human文本 -->
                </div>
                <div class="education">
                    <span class="degree">BFA Design & Technology</span>
                    <span class="school">Parsons School of Design</span>
                </div>
                <p class="bio">Crafting immersive digital experiences that push the boundaries of interactive design, combining technical expertise with artistic vision to create meaningful connections.</p>
            </div>
        </div>
    </section>
    
    <!-- Skills Section -->
    <section class="skills-section">
        <h2>SKILLS</h2>
        <div class="skills-grid">
            <!-- Skill 1 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>JavaScript</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 80%;">
                            <span class="skill-percent">80%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fab fa-js"></i>
                </div>
            </div>

            <!-- Skill 2 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>HTML5/CSS3</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 73%;">
                            <span class="skill-percent">73%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fab fa-html5"></i>
                </div>
            </div>

            <!-- Skill 3 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>React</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 65%;">
                            <span class="skill-percent">65%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fab fa-react"></i>
                </div>
            </div>

            <!-- Skill 4 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>ComfyUI & MidJourney</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 90%;">
                            <span class="skill-percent">90%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fas fa-image"></i>
                </div>
            </div>

            <!-- Skill 5 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>Python</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 55%;">
                            <span class="skill-percent">55%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fab fa-python"></i>
                </div>
            </div>

            <!-- Skill 6 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>UI/UX Design</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 88%;">
                            <span class="skill-percent">88%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fas fa-paint-brush"></i>
                </div>
            </div>

            <!-- Skill 7 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>TouchDesigner</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 85%;">
                            <span class="skill-percent">85%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fas fa-code-branch"></i>
                </div>
            </div>

            <!-- Skill 8 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>Blender</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 50%;">
                            <span class="skill-percent">50%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fas fa-cube"></i>
                </div>
            </div>

            <!-- Skill 9 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>Premiere Pro</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 50%;">
                            <span class="skill-percent">50%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fas fa-video"></i>
                </div>
            </div>

            <!-- Skill 10 -->
            <div class="skill-item">
                <div class="skill-info">
                    <h3>Unity</h3>
                    <div class="skill-bar">
                        <div class="skill-level" style="width: 55%;">
                            <span class="skill-percent">55%</span>
                        </div>
                    </div>
                </div>
                <div class="skill-icon">
                    <i class="fas fa-gamepad"></i>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Selected Works Section -->
    <section class="selected-works-section">
        <h2>SELECTED WORKS</h2>
        <div class="works-grid">
            <!-- Work Item 1 -->
            <div class="work-item">
                <a href="project/project1/index.html" class="work-item-link" aria-label="View Interactive Visual Project"></a>
                <div class="view-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="work-tags">
                    <span>Interactive</span>
                    <span>Visual</span>
                </div>
                <div class="work-image">
                    <!-- 图片容器 -->
                    <div class="image-placeholder">
                        <!-- 实际的图片将在这里显示，添加data-src属性用于懒加载 -->
                        <img data-src="project/project1/1.JPG" alt="Interactive Visual Project" style="display: none;" onload="this.style.display='block'; this.parentNode.querySelector('i').style.display='none'; this.parentNode.querySelector('span').style.display='none';">
                        <!-- 仅在图片加载前显示的占位图标 -->
                        <i class="fas fa-image"></i>
                        <span>Interactive Visual Project</span>
                    </div>
                </div>
                <div class="work-info">
                    <div class="work-header">
                        <h3>Interactive Visual Project</h3>
                    </div>
                    <!-- Description removed -->
                </div>
            </div>
            
            <!-- Work Item 2 -->
            <div class="work-item">
                <a href="#" class="work-item-link" aria-label="View Project 2"></a>
                <div class="view-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="work-tags">
                    <span>UI/UX</span>
                    <span>Branding</span>
                </div>
                <div class="work-image">
                    <!-- 图片容器 -->
                    <div class="image-placeholder">
                        <!-- 实际的图片将在这里显示，添加data-src属性用于懒加载 -->
                        <img data-src="您的图片路径2" alt="Project 2" style="display: none;" onload="this.style.display='block'; this.parentNode.querySelector('i').style.display='none'; this.parentNode.querySelector('span').style.display='none';">
                        <!-- 仅在图片加载前显示的占位图标 -->
                        <i class="fas fa-image"></i>
                        <span>Image 2</span>
                    </div>
                </div>
                <div class="work-info">
                    <div class="work-header">
                        <h3>Project Title 2</h3>
                    </div>
                    <!-- Description removed -->
                </div>
            </div>
            
            <!-- Work Item 3 -->
            <div class="work-item">
                <a href="#" class="work-item-link" aria-label="View Project 3"></a>
                <div class="view-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="work-tags">
                    <span>Animation</span>
                    <span>3D</span>
                </div>
                <div class="work-image">
                    <!-- 图片容器 -->
                    <div class="image-placeholder">
                        <!-- 实际的图片将在这里显示，添加data-src属性用于懒加载 -->
                        <img data-src="您的图片路径3" alt="Project 3" style="display: none;" onload="this.style.display='block'; this.parentNode.querySelector('i').style.display='none'; this.parentNode.querySelector('span').style.display='none';">
                        <!-- 仅在图片加载前显示的占位图标 -->
                        <i class="fas fa-image"></i>
                        <span>Image 3</span>
                    </div>
                </div>
                <div class="work-info">
                    <div class="work-header">
                        <h3>Project Title 3</h3>
                    </div>
                    <!-- Description removed -->
                </div>
            </div>
            
            <!-- Work Item 4 -->
            <div class="work-item">
                <a href="#" class="work-item-link" aria-label="View Project 4"></a>
                <div class="view-arrow">
                    <i class="fas fa-arrow-right"></i>
                </div>
                <div class="work-tags">
                    <span>Interactive</span>
                    <span>Experiential</span>
                </div>
                <div class="work-image">
                    <!-- 图片容器 -->
                    <div class="image-placeholder">
                        <!-- 实际的图片将在这里显示，添加data-src属性用于懒加载 -->
                        <img data-src="您的图片路径4" alt="Project 4" style="display: none;" onload="this.style.display='block'; this.parentNode.querySelector('i').style.display='none'; this.parentNode.querySelector('span').style.display='none';">
                        <!-- 仅在图片加载前显示的占位图标 -->
                        <i class="fas fa-image"></i>
                        <span>Image 4</span>
                    </div>
                </div>
                <div class="work-info">
                    <div class="work-header">
                        <h3>Project Title 4</h3>
                    </div>
                    <!-- Description removed -->
                </div>
            </div>
        </div>
    </section>
    
    <!-- Slider Section -->
    <section class="slider-section">
        <div class="slider-container">
            <div class="slider-heading">
                <h2>Our Featured Projects</h2>
                <p>Swipe through our latest work and discover how we bring ideas to life</p>
            </div>
            
            <div class="slider-wrapper">
                <div class="slider" id="slider">
                    <div class="slide">
                        <div class="slide-content">
                            <img src="https://source.unsplash.com/random/600x400/?website,design" alt="Project 1">
                            <h3>Modern Web Design</h3>
                            <p>A sleek and responsive website design for a tech startup, featuring intuitive navigation and stunning visuals.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-content">
                            <img src="https://source.unsplash.com/random/600x400/?app,mobile" alt="Project 2">
                            <h3>Mobile App Interface</h3>
                            <p>An elegant mobile application with seamless user experience and beautiful UI components.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-content">
                            <img src="https://source.unsplash.com/random/600x400/?branding,logo" alt="Project 3">
                            <h3>Brand Identity</h3>
                            <p>Complete brand identity package including logo design, color palette, and marketing materials.</p>
                        </div>
                    </div>
                    <div class="slide">
                        <div class="slide-content">
                            <img src="https://source.unsplash.com/random/600x400/?ecommerce,shop" alt="Project 4">
                            <h3>E-commerce Platform</h3>
                            <p>A fully functional online store with secure payment processing and inventory management.</p>
                        </div>
                    </div>
                </div>
                
                <div class="slider-controls">
                    <button class="slider-btn" id="prevBtn">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="slider-btn" id="nextBtn">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="slider-dots" id="sliderDots">
                    <div class="slider-dot active"></div>
                    <div class="slider-dot"></div>
                    <div class="slider-dot"></div>
                    <div class="slider-dot"></div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- JavaScript for mobile menu, slider and cursor effects -->
    <script>
        // For future mobile menu functionality
        const menuToggle = document.querySelector('.menu-toggle');
        
        // 确保Million Smiles字体正确加载
        document.fonts.ready.then(function() {
            console.log("所有字体已加载");
            // 检查Million Smiles字体是否加载
            if (!document.fonts.check("1em 'Million Smiles'")) {
                console.warn("Million Smiles字体未能加载，使用备用字体");
                // 如果Million Smiles字体未加载，使用备用字体
                const worldTitle = document.querySelector('.name-container .world');
                if (worldTitle) {
                    worldTitle.style.fontFamily = "'SpaceGrotesk', sans-serif";
                    worldTitle.style.fontWeight = "800";
                }
            }
        });
        
        // 确保所有文本元素不显示文本选择光标
        document.addEventListener('DOMContentLoaded', function() {
            // 防止文本选择
            document.body.style.cursor = 'auto'; // 改为auto，确保使用默认光标
            
            // 设置所有文本元素的光标样式
            const textElements = document.querySelectorAll('.hero *, .slider-section *, .navbar *');
            textElements.forEach(el => {
                el.style.cursor = 'auto'; // 改为auto
            });
            
            // 恢复交互元素的指针光标
            const interactiveElements = document.querySelectorAll('a, button, .nav-btn, .slider-btn, .slider-dot, .scroll-indicator, .social-btn');
            interactiveElements.forEach(el => {
                el.style.cursor = 'pointer';
            });
            
            // 特别处理Z's WORLD标题
            const worldTitle = document.querySelector('.name-container .world');
            if (worldTitle) {
                worldTitle.style.cursor = 'default';
                worldTitle.style.userSelect = 'none';
                worldTitle.style.webkitUserSelect = 'none';
                worldTitle.style.mozUserSelect = 'none';
                worldTitle.style.msUserSelect = 'none';
                
                // 确保文字可见
                worldTitle.style.display = 'block';
                worldTitle.style.visibility = 'visible';
                worldTitle.style.opacity = '1';
            }
        });
        
        // Z's WORLD 标题动画效果 - 增强版
        document.addEventListener('DOMContentLoaded', function() {
            const worldTitle = document.querySelector('.name-container .world');
            if (!worldTitle) return;
            
            // 先隐藏原始文本，避免闪烁
            worldTitle.style.opacity = "0";
            
            // 添加交互提示图标
            const interactionHint = document.createElement('div');
            interactionHint.className = 'interaction-hint';
            interactionHint.innerHTML = ''; // 移除图标
            worldTitle.appendChild(interactionHint);
            
            // 储存原始文本，以备需要恢复
            const originalText = worldTitle.textContent || "Z's WORLD";
            
            try {
                // 检查Million Smiles字体是否加载
                document.fonts.ready.then(function() {
                    console.log("检查Million Smiles字体加载情况");
                    const isFontLoaded = document.fonts.check("1em 'Million Smiles'");
                    console.log("Million Smiles字体加载状态:", isFontLoaded);
                    
                    // 将文本分割成单个字符，以便单独为每个字符添加动画
                    // 确保每个字符都保持Million Smiles字体
                    worldTitle.innerHTML = originalText.split('').map((char, index) => {
                        return `<span class="char" style="--char-index: ${index}; font-family: 'Million Smiles', sans-serif; opacity: 1; transform: translateY(0);">${char}</span>`;
                    }).join('');
                    
                    // 重新添加交互提示图标（因为innerHTML会覆盖之前添加的元素）
                    worldTitle.appendChild(interactionHint);
                    
                    // 初始化动画：字符默认已经可见
                    const chars = worldTitle.querySelectorAll('.char');
                    
                    // 平滑显示处理后的文本（只有当name-section可见时才显示）
                    if (worldTitle.closest('.name-section').style.display !== 'none') {
                        gsap.to(worldTitle, {
                            opacity: 1,
                            duration: 0.5,
                            ease: "power2.out"
                        });
                    }
                    
                    // 添加轻微的初始动画效果（呼吸效果）
                    startBreathingAnimation(chars, worldTitle);
                    
                    function startBreathingAnimation(chars, title) {
                        // Get responsive scale factors
                        const baseScale = Math.min(window.innerWidth / 1920, window.innerHeight / 1080);
                        const responsiveY = Math.max(-0.5 * baseScale, -2);
                        const responsiveScale = 1 + (0.01 * Math.max(baseScale, 0.5));
                        
                        // 初始动画：轻微呼吸效果，响应式调整
                        gsap.to(chars, {
                            duration: 2.5, // 减缓速度
                            scale: responsiveScale, // 响应式缩放幅度
                            y: responsiveY, // 响应式垂直移动
                            stagger: {
                                each: 0.1,
                                repeat: -1,
                                yoyo: true,
                                from: "center"
                            },
                            ease: "sine.inOut"
                        });
                        
                        // 确保初始背景渐变效果可见
                        gsap.to(title, {
                            duration: 6, // 放慢动画
                            backgroundImage: "linear-gradient(45deg, #ff3e7f, #ffb56b)",
                            backgroundSize: "200% 200%",
                            backgroundPosition: "0% 0%",
                            repeat: -1,
                            yoyo: true,
                            ease: "sine.inOut"
                        });
                    }
                    
                    // 立即显示提示文字，不使用延迟
                    interactionHint.style.opacity = '1';
                    
                    // 设置一个变量来跟踪是否已经交互过
                    let hasInteracted = false;
                    
                    // 添加鼠标悬停事件
                    worldTitle.addEventListener('mouseenter', function() {
                        if (hasInteracted) return; // 如果已经交互过，不做任何操作
                        
                        // 标记为已交互
                        hasInteracted = true;
                        
                        // 添加动画类
                        this.classList.add('animate');
                        
                        // 隐藏交互提示图标
                        if (interactionHint) {
                            gsap.to(interactionHint, {
                                duration: 0.3,
                                opacity: 0,
                                ease: "power2.in",
                                onComplete: function() {
                                    interactionHint.style.display = 'none';
                                }
                            });
                        }
                        
                        // 停止初始动画
                        gsap.killTweensOf(chars);
                        
                        // 创建波浪效果动画
                        gsap.to(chars, {
                            duration: 0.5,
                            stagger: 0.05,
                            ease: "elastic.out(1, 0.3)",
                            rotationX: "random(-15, 15)", // 减少旋转角度
                            rotationY: "random(-20, 20)", // 减少旋转角度
                            y: "random(-10, 10)", // 减少移动距离
                            z: "random(0, 30)", // 减少z轴距离
                            scale: 1.05, // 减少放大效果
                            color: function() {
                                // 减少颜色饱和度
                                const hue = Math.random() * 60 + 330; // 330-390 (红到紫色范围)
                                return `hsl(${hue}, 80%, 65%)`; // 降低饱和度和亮度
                            },
                            textShadow: "0 0 8px rgba(255, 62, 127, 0.5), 0 0 15px rgba(255, 181, 107, 0.3)" // 减弱文字阴影
                        });
                        
                        // 为整个文本添加背景动画
                        gsap.to(this, {
                            duration: 2, // 放慢动画
                            backgroundImage: "linear-gradient(45deg, #ff3e7f, #ffb56b, #ff8e53, #ff3e7f)",
                            backgroundSize: "300% 300%",
                            ease: "none",
                            repeat: -1,
                            yoyo: true
                        });
                    });
                    
                    // 完全移除鼠标离开事件处理，不再恢复初始状态
                    // worldTitle.addEventListener('mouseleave', function() {...} );
                    
                    // 添加触摸事件处理（针对移动设备）
                    let isTouching = false;
                    
                    worldTitle.addEventListener('touchstart', function(e) {
                        if (hasInteracted) return; // 如果已经交互过，不做任何操作
                        
                        e.preventDefault(); // 防止默认行为
                        isTouching = true;
                        hasInteracted = true; // 标记为已交互
                        
                        // 模拟鼠标进入事件
                        const mouseenterEvent = new Event('mouseenter');
                        this.dispatchEvent(mouseenterEvent);
                    });
                    
                    // 添加触摸结束事件，但不再恢复初始状态
                    document.addEventListener('touchend', function(e) {
                        if (isTouching) {
                            isTouching = false;
                            // 不再触发鼠标离开事件
                        }
                    });
                });
                
            } catch (error) {
                console.error('动画初始化失败:', error);
                // 如果动画初始化失败，恢复原始文本
                worldTitle.innerHTML = originalText;
            }
            
            // 确保文字可见
            worldTitle.style.display = 'block';
            worldTitle.style.visibility = 'visible';
            worldTitle.style.opacity = '1';
        });
        
        // Add scroll effect to navbar
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            const navbarContainer = document.querySelector('.navbar-container');
            
            // 移除所有滚动效果
            navbar.style.padding = '1.5rem 3%';
                navbarContainer.style.background = 'transparent';
                navbarContainer.style.backdropFilter = 'none';
            navbarContainer.style.paddingTop = '15px';
        });
        
        // Scroll indicator functionality - 简化代码
        // const scrollIndicator = document.getElementById('scrollIndicator'); // 已删除元素，去除引用
        const homeLink = document.querySelector('.nav-links a[href="#"]');
        const logo = document.querySelector('.logo');

        // 简化的scrollToTop函数，只包含滚动功能
        function scrollToTop() {
            gsap.to(window, {
                duration: 1.5,
                scrollTo: 0,
                ease: "power2.inOut"
            });
        }

        // Add scroll to top functionality for home link and logo
        homeLink.addEventListener('click', (e) => {
            e.preventDefault();
            scrollToTop();
        });

        logo.addEventListener('click', (e) => {
            e.preventDefault();
            scrollToTop();
        });

        // 删除所有与scrollIndicator相关的事件监听器和动画代码
        
        // Slider functionality
        const slider = document.getElementById('slider');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const dots = document.querySelectorAll('.slider-dot');
        
        let slideIndex = 0;
        const slideCount = document.querySelectorAll('.slide').length;
        
        // Initialize slider
        updateSlider();
        
        // Event listeners for buttons
        prevBtn.addEventListener('click', () => {
            slideIndex = (slideIndex - 1 + slideCount) % slideCount;
            updateSlider();
        });
        
        nextBtn.addEventListener('click', () => {
            slideIndex = (slideIndex + 1) % slideCount;
            updateSlider();
        });
        
        // Event listeners for dots
        dots.forEach((dot, index) => {
            dot.addEventListener('click', () => {
                slideIndex = index;
                updateSlider();
            });
        });
        
        // Update slider position and active dot
        function updateSlider() {
            slider.style.transform = `translateX(-${slideIndex * 100}%)`;
            
            // Update active dot
            dots.forEach((dot, index) => {
                if (index === slideIndex) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }
        
        // Auto slide functionality
        let autoSlideInterval = setInterval(() => {
            slideIndex = (slideIndex + 1) % slideCount;
            updateSlider();
        }, 5000);
        
        // Pause auto slide on hover
        slider.addEventListener('mouseenter', () => {
            clearInterval(autoSlideInterval);
        });
        
        slider.addEventListener('mouseleave', () => {
            autoSlideInterval = setInterval(() => {
                slideIndex = (slideIndex + 1) % slideCount;
                updateSlider();
            }, 5000);
        });
        
        // Touch swipe functionality
        let touchStartX = 0;
        let touchEndX = 0;
        
        slider.addEventListener('touchstart', (e) => {
            touchStartX = e.changedTouches[0].screenX;
        });
        
        slider.addEventListener('touchend', (e) => {
            touchEndX = e.changedTouches[0].screenX;
            handleSwipe();
        });
        
        function handleSwipe() {
            const swipeThreshold = 50;
            if (touchEndX < touchStartX - swipeThreshold) {
                // Swipe left
                slideIndex = (slideIndex + 1) % slideCount;
                updateSlider();
            } else if (touchEndX > touchStartX + swipeThreshold) {
                // Swipe right
                slideIndex = (slideIndex - 1 + slideCount) % slideCount;
                updateSlider();
            }
        }
        
        // Custom cursor functionality
        // const cursorDot = document.getElementById('cursor-dot');
        // const cursorOutline = document.getElementById('cursor-outline');
        // const cursorContainer = document.querySelector('.cursor-container');
        
        // 禁用自定义光标代码
        /*
        // Check if we're on a device with touch support
        if (!('ontouchstart' in window)) {
            let mouseX = 0;
            let mouseY = 0;
            let cursorX = 0;
            let cursorY = 0;
            
            // GSAP smooth cursor movement with subtle breathing effect
            gsap.to(cursorDot, {
                scale: 1.2,
                duration: 2,
                repeat: -1,
                yoyo: true,
                ease: "power1.inOut"
            });
            
            gsap.to({}, 0.016, {
                repeat: -1,
                onRepeat: function() {
                    const deltaX = mouseX - cursorX;
                    const deltaY = mouseY - cursorY;
                    
                    cursorX += deltaX * 0.15;
                    cursorY += deltaY * 0.15;
                    
                    gsap.set(cursorDot, {
                        left: cursorX,
                        top: cursorY,
                        force3D: true
                    });
                }
            });
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
            });
        }
        */
            
            // Enhanced hover effects with GSAP
            const interactiveElements = document.querySelectorAll('a, button, .nav-btn, .slider-btn, .slider-dot');
            
            // Variable to track if mouse is over an interactive element
            let isOverInteractive = false;
            let activeInteractiveElement = null;
            
            // Add hover effect for interactive elements
            interactiveElements.forEach(el => {
                return; // 提前结束forEach循环，禁用所有hover效果
                el.addEventListener('mouseenter', () => {
                    // Ensure cursor is pointer when hovering over interactive elements
                    el.style.cursor = 'pointer';
                    
                    // Add pulsing glow effect to the element
                    const afterEl = document.createElement('div');
                    afterEl.className = 'element-glow';
                    afterEl.style.position = 'absolute';
                    afterEl.style.top = '50%';
                    afterEl.style.left = '50%';
                    afterEl.style.transform = 'translate(-50%, -50%)';
                    
                    // Adjust size based on element type
                    if (el.tagName.toLowerCase() === 'a' && !el.classList.contains('logo')) {
                        // For text links, make the glow area larger than the text
                        afterEl.style.width = `calc(100% + 20px)`;
                        afterEl.style.height = `calc(100% + 16px)`;
                        afterEl.style.borderRadius = '8px';
                    } else if (el.classList.contains('logo')) {
                        // For logo - remove the glow background
                        return;
                    } else if (el.classList.contains('slider-dot')) {
                        // For slider dots
                        afterEl.style.width = '30px';
                        afterEl.style.height = '30px';
                        afterEl.style.borderRadius = '50%';
                    } else if (el.classList.contains('nav-btn') || el.classList.contains('slider-btn')) {
                        // For buttons
                        afterEl.style.width = `calc(100% + 10px)`;
                        afterEl.style.height = `calc(100% + 10px)`;
                        afterEl.style.borderRadius = el.classList.contains('slider-btn') ? '50%' : '50px';
                    } else {
                        // Default
                        afterEl.style.width = '100%';
                        afterEl.style.height = '100%';
                        afterEl.style.borderRadius = '4px';
                    }
                    
                    afterEl.style.boxShadow = '0 0 15px 5px rgba(255, 62, 127, 0.3)';
                    afterEl.style.zIndex = '-1';
                    afterEl.style.pointerEvents = 'none';
                    
                    // Only add if it doesn't already have one
                    if (!el.querySelector('.element-glow')) {
                        el.style.position = 'relative';
                        el.style.overflow = 'visible';
                        el.appendChild(afterEl);
                        
                        // Animate the glow
                        gsap.to(afterEl, {
                            boxShadow: '0 0 20px 8px rgba(255, 62, 127, 0.5)',
                            duration: 0.8,
                            repeat: -1,
                            yoyo: true,
                            ease: "sine.inOut"
                        });
                    }
                    
                    // For text links, show the background
                    if ((el.tagName.toLowerCase() === 'a' && !el.classList.contains('logo')) || 
                        el.classList.contains('nav-btn')) {
                        el.style.setProperty('--link-bg-opacity', '1');
                    }
                });
                
                el.addEventListener('mouseleave', () => {
                    // Maintain pointer cursor even when leaving
                    el.style.cursor = 'pointer';
                    
                    // Remove the glow effect
                    const glow = el.querySelector('.element-glow');
                    if (glow) {
                        gsap.to(glow, {
                            boxShadow: '0 0 0 0 rgba(255, 62, 127, 0)',
                            duration: 0.3,
                            onComplete: () => {
                                glow.remove();
                            }
                        });
                    }
                    
                    // For text links, hide the background
                    if ((el.tagName.toLowerCase() === 'a' && !el.classList.contains('logo')) || 
                        el.classList.contains('nav-btn')) {
                        el.style.setProperty('--link-bg-opacity', '0');
                    }
                });
            });
            
            // Click animation with GSAP
            document.addEventListener('mousedown', () => {
                if (!isOverInteractive) {
                    gsap.to(cursorDot, {
                        duration: 0.15,
                        scale: 0.8,
                        ease: "power2.out"
                    });
                }
            });
            
            document.addEventListener('mouseup', () => {
                if (!isOverInteractive) {
                    gsap.to(cursorDot, {
                        duration: 0.15,
                        scale: 1,
                        ease: "power2.out"
                    });
                }
            });
            
            document.addEventListener('mousemove', (e) => {
                mouseX = e.clientX;
                mouseY = e.clientY;
                
                // Check if mouse is over any interactive element
                const elementUnderMouse = document.elementFromPoint(e.clientX, e.clientY);
                if (elementUnderMouse) {
                    // Check if the element or any of its parents is an interactive element
                    let currentElement = elementUnderMouse;
                    let isOverInteractiveNow = false;
                    let interactiveElement = null;
                    
                    while (currentElement && !isOverInteractiveNow) {
                        // 以下是水波纹吸收效果的关键代码，当鼠标悬停在这些元素上时会停止产生水波纹
                        if (currentElement.matches('a, button, .nav-btn, .slider-btn, .slider-dot, .skill-item, .work-item')) {
                            isOverInteractiveNow = true;
                            interactiveElement = currentElement;
                            if (!isOverInteractive) {
                                isOverInteractive = true;
                                
                                // Get the center position of the interactive element
                                const rect = interactiveElement.getBoundingClientRect();
                                let elementCenterX = rect.left + rect.width / 2;
                                let elementCenterY = rect.top + rect.height / 2;
                                
                                // For text links, create a larger target area
                                let targetWidth = rect.width;
                                let targetHeight = rect.height;
                                
                                if ((interactiveElement.tagName.toLowerCase() === 'a' && !interactiveElement.classList.contains('logo')) || 
                                    interactiveElement.classList.contains('nav-btn')) {
                                    // Make the target area larger for text links
                                    targetWidth += 20;
                                    targetHeight += 16;
                                }
                                
                                // Skip the absorption animation for work-item elements
                                if (!interactiveElement.classList.contains('work-item')) {
                                    // Create a "sucking in" effect towards the center of the element
                                    gsap.to(cursorDot, {
                                        duration: 0.4,
                                        left: elementCenterX,
                                        top: elementCenterY,
                                        width: 0,
                                        height: 0,
                                        opacity: 0,
                                        scale: 0.2,
                                        ease: "power3.in",
                                        onComplete: () => {
                                            // Hide the cursor dot completely after animation
                                            gsap.set(cursorDot, {
                                                opacity: 0,
                                                scale: 0
                                            });
                                        }
                                    });
                                }
                                
                                // Skip ripple absorption for work-item elements
                                if (!interactiveElement.classList.contains('work-item')) {
                                    // Remove any existing ripples with a sucking effect
                                    const existingRipples = document.querySelectorAll('.cursor-trail');
                                    existingRipples.forEach(ripple => {
                                        const rippleRect = ripple.getBoundingClientRect();
                                        const rippleX = rippleRect.left + rippleRect.width / 2;
                                        const rippleY = rippleRect.top + rippleRect.height / 2;
                                        
                                        // Animate ripple towards the element center
                                        gsap.to(ripple, {
                                            duration: 0.3,
                                            left: elementCenterX,
                                            top: elementCenterY,
                                            scale: 0,
                                            opacity: 0,
                                            ease: "power2.in",
                                            onComplete: () => ripple.remove()
                                        });
                                    });
                                } else {
                                    // For work-item, just remove ripples without animation
                                    const existingRipples = document.querySelectorAll('.cursor-trail');
                                    existingRipples.forEach(ripple => {
                                        ripple.remove();
                                    });
                                }
                            }
                        }
                        currentElement = currentElement.parentElement;
                    }
                    
                    // If we're not over an interactive element now but we were before - 水波纹吸收效果结束后的恢复动画
                    if (!isOverInteractiveNow && isOverInteractive) {
                        isOverInteractive = false;
                        
                        // Show cursor dot again with a "pop" effect
                        gsap.fromTo(cursorDot, 
                            {
                                opacity: 0,
                                scale: 0.2,
                                width: 0,
                                height: 0
                            },
                            {
                                duration: 0.4,
                                opacity: 1,
                                scale: 1,
                                width: 60,
                                height: 60,
                                backgroundColor: 'rgba(255, 62, 127, 0.25)',
                                filter: 'blur(10px)',
                                ease: "back.out(1.7)"
                            }
                        );
                    }
                }
                
                // 水波纹效果生成区域 - Only create ripples if not over interactive elements
                if (!isOverInteractive) {
                    // Create ripple based on speed
                    const speed = Math.sqrt(
                        Math.pow(e.movementX, 2) + 
                        Math.pow(e.movementY, 2)
                    );
                    
                    if (speed > 2) {
                        createRipple(cursorX, cursorY);
                        
                        if (speed > 15) {
                            const points = Math.min(5, Math.floor(speed / 10));
                            for (let i = 1; i <= points; i++) {
                                const ratio = i / (points + 1);
                                const x = cursorX + (mouseX - cursorX) * ratio;
                                const y = cursorY + (mouseY - cursorY) * ratio;
                                
                                setTimeout(() => {
                                    if (!isOverInteractive) {
                                        createRipple(x, y);
                                    }
                                }, i * 30);
                            }
                        }
                    }
                }
            });
            
            // 创建水波纹动画效果的函数
            function createRipple(x, y) {
                // Only create ripples if not over interactive elements
                if (isOverInteractive) return;
                
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                cursorContainer.appendChild(trail);
                
                const size = gsap.utils.random(60, 80);
                const duration = gsap.utils.random(0.8, 1.2);
                const hue = gsap.utils.random(330, 350);
                const opacity = gsap.utils.random(0.4, 0.6);
                
                gsap.set(trail, {
                    left: x,
                    top: y,
                    width: size,
                    height: size,
                    background: `radial-gradient(circle, hsla(${hue}, 90%, 60%, ${opacity}) 0%, hsla(${hue}, 90%, 60%, 0) 70%)`
                });
                
                gsap.to(trail, {
                    duration: duration,
                    scale: 2.5,
                    opacity: 0,
                    ease: "power2.out",
                    onComplete: () => trail.remove()
                });
        }

        // Home intro control functions
        function shouldShowIntro() {
            return sessionStorage.getItem('introShown') !== '1';
        }

        function markIntroShown() {
            sessionStorage.setItem('introShown', '1');
        }

        // 添加覆盖层交互
        document.addEventListener('DOMContentLoaded', function() {
            const pageCover = document.getElementById('pageCover');
            const coverTop = document.getElementById('coverTop');
            const coverBottom = document.getElementById('coverBottom');
            const coverMessage = document.getElementById('coverMessage');
            const worldTitle = document.querySelector('.name-container .world');
            const coverNameContainer = document.getElementById('coverNameContainer');
            const coverWorldTitle = document.querySelector('.cover-name-container .world');
            const coverThisIs = document.querySelector('.cover-name-container .this-is');
            const coverIs = document.querySelector('.cover-name-container .is');
            const clickableOverlay = document.querySelector('.clickable-overlay');
            
            // 确保页面完全加载
            window.addEventListener('load', function() {
                // Check if Home intro should be shown (sessionStorage gate)
                if (!shouldShowIntro()) {
                    // Skip intro - hide cover and show main content directly
                    pageCover.style.display = 'none';
                    animateMainContent();
                    return;
                }
                
                // Show intro for first-time visitors
                // 为透明覆盖层添加点击事件
                if (clickableOverlay) {
                    clickableOverlay.addEventListener('click', function() {
                        openCurtain();
                    });
                }
                
                // 为整个覆盖层命名容器添加点击事件
                coverNameContainer.addEventListener('click', function() {
                    openCurtain();
                });
                
                // 为每个子元素单独添加点击事件，确保所有部分都可点击
                if (coverWorldTitle) {
                    coverWorldTitle.addEventListener('click', function(e) {
                        e.stopPropagation(); // 防止事件冒泡
                        openCurtain();
                    });
                }
                
                if (coverThisIs) {
                    coverThisIs.addEventListener('click', function(e) {
                        e.stopPropagation(); // 防止事件冒泡
                        openCurtain();
                    });
                }
                
                if (coverIs) {
                    coverIs.addEventListener('click', function(e) {
                        e.stopPropagation(); // 防止事件冒泡
                        openCurtain();
                    });
                }
                
                // 为覆盖层上的文字应用相同的动画效果
                if (coverWorldTitle) {
                    try {
                        // 检查Million Smiles字体是否加载
                        document.fonts.ready.then(function() {
                            console.log("检查Million Smiles字体加载情况 - 覆盖层");
                            const isFontLoaded = document.fonts.check("1em 'Million Smiles'");
                            console.log("Million Smiles字体加载状态:", isFontLoaded);
                            
                            // 直接使用HTML中预设的字符，不再重新创建
                            // 获取已有的字符元素
                            const chars = coverWorldTitle.querySelectorAll('.char');
                            
                            // 添加轻微的初始动画效果（呼吸效果）
                            startBreathingAnimation(chars, coverWorldTitle);
                            
                            function startBreathingAnimation(chars, title) {
                                // Get responsive scale factors for cover animation
                                const baseScale = Math.min(window.innerWidth / 1920, window.innerHeight / 1080);
                                const responsiveY = Math.max(-0.5 * baseScale, -2);
                                const responsiveScale = 1 + (0.01 * Math.max(baseScale, 0.5));
                                
                                // 初始动画：轻微呼吸效果，响应式调整
                                gsap.to(chars, {
                                    duration: 2.5, // 减缓速度
                                    scale: responsiveScale, // 响应式缩放幅度
                                    y: responsiveY, // 响应式垂直移动
                                    stagger: {
                                        each: 0.1,
                                        repeat: -1,
                                        yoyo: true,
                                        from: "center"
                                    },
                                    ease: "sine.inOut"
                                });
                                
                                // 确保初始背景渐变效果可见
                                gsap.to(title, {
                                    duration: 6, // 放慢动画
                                    backgroundImage: "linear-gradient(45deg, #ff3e7f, #ffb56b)",
                                    backgroundSize: "200% 200%",
                                    backgroundPosition: "0% 0%",
                                    repeat: -1,
                                    yoyo: true,
                                    ease: "sine.inOut"
                                });
                            }
                            
                            // 添加鼠标悬停事件 - 启动动画但不打开卷帘
                            coverWorldTitle.addEventListener('mouseenter', function() {
                                // 添加动画类
                                this.classList.add('animate');
                                
                                // 停止初始动画
                                gsap.killTweensOf(chars);
                                
                                // 创建持续的波浪效果动画
                                gsap.to(chars, {
                                    duration: 1,
                                    stagger: {
                                        each: 0.1,
                                        repeat: -1,
                                        yoyo: true,
                                        from: "center"
                                    },
                                    ease: "sine.inOut",
                                    rotationX: function() { return Math.random() * 30 - 15; }, // 随机旋转角度
                                    rotationY: function() { return Math.random() * 40 - 20; }, // 随机旋转角度
                                    y: function() { return Math.random() * 20 - 10; }, // 随机垂直移动
                                    z: function() { return Math.random() * 30; }, // 随机深度
                                    scale: function() { return 1.05 + Math.random() * 0.1; }, // 随机缩放
                                    color: function() {
                                        // 随机颜色
                                        const hue = Math.random() * 60 + 330; // 330-390 (红到紫色范围)
                                        return `hsl(${hue}, 80%, 65%)`; // 降低饱和度和亮度
                                    },
                                    textShadow: "0 0 8px rgba(255, 62, 127, 0.5), 0 0 15px rgba(255, 181, 107, 0.3)" // 减弱文字阴影
                                });
                                
                                // 为整个文本添加背景动画
                                gsap.to(this, {
                                    duration: 2, // 放慢动画
                                    backgroundImage: "linear-gradient(45deg, #ff3e7f, #ffb56b, #ff8e53, #ff3e7f)",
                                    backgroundSize: "300% 300%",
                                    ease: "none",
                                    repeat: -1,
                                    yoyo: true
                                });
                            });
                            
                            // 添加鼠标离开事件处理程序
                            coverWorldTitle.addEventListener('mouseleave', function() {
                                // 移除动画类
                                this.classList.remove('animate');
                                
                                // 停止波浪动画
                                gsap.killTweensOf(chars);
                                
                                // 恢复初始呼吸动画
                                startBreathingAnimation(chars, this);
                            });
                            
                            // 确保每个字符也是可点击的
                            chars.forEach(char => {
                                char.style.cursor = 'pointer';
                                char.addEventListener('click', function(e) {
                                    e.stopPropagation(); // 防止事件冒泡
                                    openCurtain();
                                });
                            });
                            
                            // 添加触摸事件处理（针对移动设备）
                            let isTouching = false;
                            
                            coverWorldTitle.addEventListener('touchstart', function(e) {
                                e.preventDefault(); // 防止默认行为
                                isTouching = true;
                                
                                // 模拟鼠标进入事件
                                const mouseenterEvent = new Event('mouseenter');
                                this.dispatchEvent(mouseenterEvent);
                                
                                // 在移动设备上，触摸后也应该打开卷帘
                                openCurtain();
                            });
                        });
                        
                    } catch (error) {
                        console.error('动画初始化失败:', error);
                        // 如果动画初始化失败，恢复原始文本
                        coverWorldTitle.innerHTML = originalText;
                        
                        // 即使初始化失败，也应为文本添加点击事件
                        coverWorldTitle.addEventListener('click', function() {
                            openCurtain();
                        });
                    }
                }
                
                // 卷帘打开函数
                function openCurtain() {
                    // Mark intro as shown for this tab session
                    markIntroShown();
                    
                    // 禁用点击，防止重复触发
                    pageCover.style.pointerEvents = 'none';
                    
                    // 淡出交互提示文字 - 在点击时才淡出
                    const interactionHint = coverWorldTitle.querySelector('.interaction-hint');
                    if (interactionHint) {
                        gsap.to(interactionHint, {
                            duration: 0.3,
                            opacity: 0,
                            ease: "power2.in",
                            onComplete: function() {
                                interactionHint.style.display = 'none';
                            }
                        });
                    }
                    
                    // 淡出文字
                    gsap.to(coverMessage, {
                        opacity: 0,
                        duration: 1,
                        ease: "power2.in"
                    });
                    
                    // 淡出标题
                    gsap.to(coverNameContainer, {
                        opacity: 0,
                        duration: 1,
                        ease: "power2.in"
                    });
                    
                    // 卷帘动画 - 更长的动画时间，更明显的过渡
                    gsap.to(coverTop, {
                        y: "-100%",
                        duration: 2.5,
                        ease: "power2.inOut"
                    });
                    
                    gsap.to(coverBottom, {
                        y: "100%",
                        duration: 2.5,
                        ease: "power2.inOut",
                        onComplete: function() {
                            // 立即开始显示主界面元素，不等待覆盖层消失
                            animateMainContent();
                            
                            // 动画完全结束后完全移除覆盖层DOM元素
                            setTimeout(function() {
                                if (pageCover && pageCover.parentNode) {
                                    pageCover.parentNode.removeChild(pageCover);
                                }
                            }, 500);
                        }
                    });
                }
                
                // 添加主界面元素的动画函数
                function animateMainContent() {
                    // 获取主界面元素
                    const mainTitle = document.querySelector('.hero-content .main-title');
                    const infoGrid = document.querySelector('.hero-content .info-grid');
                    const socialLinks = document.querySelector('.hero .social-links');
                    // 移除 scrollIndicator 引用
                    const skillsSection = document.querySelector('.skills-section');
                    
                    // 创建时间线
                    const tl = gsap.timeline();
                    
                    // 首先显示Z's WORLD
                    tl.to(mainTitle, {
                        duration: 1.2,
                        opacity: 1,
                        y: 0,
                        visibility: 'visible',
                        ease: "power3.out"
                    });
                    
                    // 然后显示信息网格
                    tl.to(infoGrid, {
                        duration: 1,
                        opacity: 1,
                        y: 0,
                        visibility: 'visible',
                        ease: "power2.out"
                    }, "-=0.7"); // 与前一个动画有重叠
                    
                    // 接着显示社交图标
                    tl.to(socialLinks, {
                        duration: 0.8,
                        opacity: 1,
                        y: 0,
                        visibility: 'visible',
                        ease: "power2.out"
                    }, "-=0.5"); // 与前一个动画有重叠
                    
                    // 移除 scrollIndicator 的动画
                    
                    // 最后显示技能部分
                    tl.to(skillsSection, {
                        duration: 1,
                        opacity: 1,
                        y: 0,
                        visibility: 'visible',
                        ease: "power2.out"
                    }, "-=0.3"); // 与前一个动画有重叠
                }
            });
        });

        // 全局动画效果函数 - 移到全局作用域以供resize处理器使用
        function startBreathingAnimation(chars, title) {
            // Get responsive scale factors
            const baseScale = Math.min(window.innerWidth / 1920, window.innerHeight / 1080);
            const responsiveY = Math.max(-0.5 * baseScale, -2);
            const responsiveScale = 1 + (0.01 * Math.max(baseScale, 0.5));
            
            // 初始动画：轻微呼吸效果，响应式调整
            gsap.to(chars, {
                duration: 2.5, // 减缓速度
                scale: responsiveScale, // 响应式缩放幅度
                y: responsiveY, // 响应式垂直移动
                stagger: {
                    each: 0.1,
                    repeat: -1,
                    yoyo: true,
                    from: "center"
                },
                ease: "sine.inOut"
            });
            
            // 确保初始背景渐变效果可见
            gsap.to(title, {
                duration: 6, // 放慢动画
                backgroundImage: "linear-gradient(45deg, #ff3e7f, #ffb56b)",
                backgroundSize: "300% 300%",
                backgroundPosition: "0% 0%",
                backgroundClip: "text",
                ease: "none",
                repeat: -1,
                yoyo: true
            }, "<"); // 与上一个动画同时开始
        }

        function startDefaultWaveEffect(chars, title) {
            // Get responsive scale factors
            const baseScale = Math.min(window.innerWidth / 1920, window.innerHeight / 1080);
            const responsiveY = Math.max(-5 * baseScale, -10);
            const responsiveRotation = Math.max(7.5 * baseScale, 15);
            const responsiveScale = 1 + (0.05 * Math.max(baseScale, 0.5));
            // 创建一个时间线
            const tl = gsap.timeline();
            
            // 为每个字符设置波浪动画效果 - 响应式
            tl.to(chars, {
                duration: 2,
                stagger: {
                    each: 0.1,
                    repeat: -1,
                    yoyo: true,
                    from: "center"
                },
                ease: "sine.inOut",
                rotationX: function() { return Math.random() * responsiveRotation - responsiveRotation/2; }, // 响应式旋转角度
                rotationY: function() { return Math.random() * (responsiveRotation * 1.33) - (responsiveRotation * 0.67); }, // 响应式旋转角度
                y: function() { return Math.random() * Math.abs(responsiveY) - Math.abs(responsiveY)/2; }, // 响应式垂直移动
                z: function() { return Math.random() * responsiveRotation; }, // 响应式深度
                scale: function() { return responsiveScale; }, // 响应式缩放
                color: function() {
                    // 随机颜色
                    const hue = Math.random() * 60 + 330; // 330-390 (红到紫色范围)
                    return `hsl(${hue}, 80%, 65%)`; // 降低饱和度和亮度
                },
                textShadow: "0 0 5px rgba(255, 62, 127, 0.4), 0 0 10px rgba(255, 181, 107, 0.2)" // 减弱文字阴影
            });
            
            // 同时为整个文本添加背景动画
            tl.to(title, {
                duration: 4, // 放慢动画
                backgroundImage: "linear-gradient(45deg, #ff3e7f, #ffb56b, #ff8e53, #ff3e7f)",
                backgroundSize: "300% 300%",
                backgroundPosition: "0% 0%",
                backgroundClip: "text",
                ease: "none",
                repeat: -1,
                yoyo: true
            }, "<"); // 与上一个动画同时开始
        }

        // 添加主页面Z's WORLD的动画效果
        document.addEventListener('DOMContentLoaded', function() {
            // 获取主页面上的Z's WORLD元素
            const mainWorldTitle = document.querySelector('.world-title');
            if (!mainWorldTitle) return;
            
            // 获取所有字符元素
            const mainChars = mainWorldTitle.querySelectorAll('.char');
            
            // 添加默认的波浪光晕效果（与之前鼠标悬停时的效果类似）
            startDefaultWaveEffect(mainChars, mainWorldTitle);
            
            // 添加鼠标悬停和离开事件
            mainWorldTitle.addEventListener('mouseenter', function() {
                // 鼠标悬停时的效果已通过CSS处理
            });
            
            mainWorldTitle.addEventListener('mouseleave', function() {
                // 鼠标离开时的效果已通过CSS处理
            });
        });

        // 初始化selected-works-section的动画
        document.addEventListener('DOMContentLoaded', function() {
            // 修改 selected-works-section 动画代码
            const worksSection = document.querySelector('.selected-works-section');
            
            // 使用IntersectionObserver检测元素进入视口
            const worksSectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                        worksSectionObserver.unobserve(entry.target); // 一旦动画开始，不再监听
                    }
                });
            }, {
                threshold: 0.1 // 当10%的元素可见时触发
            });
            
            if (worksSection) {
                worksSectionObserver.observe(worksSection);
            }
            
            // 图片懒加载处理，恢复此功能
            function lazyLoadImages() {
                const lazyImages = document.querySelectorAll('img[data-src]');
                
                const imageObserver = new IntersectionObserver((entries, observer) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            const img = entry.target;
                            img.src = img.dataset.src;
                            // 图片已开始加载，不再观察它
                            observer.unobserve(img);
                        }
                    });
                });
                
                lazyImages.forEach(img => {
                    imageObserver.observe(img);
                });
            }
            
            // 启动图片懒加载
            lazyLoadImages();
            
            // 为每个作品项创建单独的观察器，实现滚动到哪里显示到哪里的效果
            const workItems = document.querySelectorAll('.work-item');
            
            // 为每个作品项创建观察器
            const workItemObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // 添加 in-view 类触发动画
                        entry.target.classList.add('in-view');
                        
                        // 一旦看到了这个作品项，就不再观察它
                        workItemObserver.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.3, // 当30%的作品项可见时触发动画
                rootMargin: '0px 0px -15% 0px' // 稍微提前触发，以获得更平滑的效果
            });
            
            // 开始观察所有作品项
            workItems.forEach(item => {
                workItemObserver.observe(item);
            });
            
            // 为 skills-section 添加滑动动画
            const skillsSection = document.querySelector('.skills-section');
            
            // 使用IntersectionObserver检测 skills-section 进入视口
            const skillsSectionObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('in-view');
                        skillsSectionObserver.unobserve(entry.target); // 一旦动画开始，不再监听
                    }
                });
            }, {
                threshold: 0.1 // 当10%的元素可见时触发
            });
            
            if (skillsSection) {
                skillsSectionObserver.observe(skillsSection);
            }
            
            // 为每个技能项创建观察器
            const skillItemObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        // 添加 in-view 类触发技能项的滑入动画
                        entry.target.classList.add('in-view');
                        
                        // 处理技能条动画
                        animateSkillBar(entry.target);
                        
                        // 一旦看到了这个技能项，就不再观察它
                        skillItemObserver.unobserve(entry.target);
                    }
                });
            }, {
                threshold: 0.5, // 当50%的技能项可见时触发动画
                rootMargin: '0px 0px -10% 0px' // 稍微提前触发，以获得更平滑的效果
            });
            
            // 单独的函数处理技能条动画
            function animateSkillBar(skillItem) {
                const skillBar = skillItem.querySelector('.skill-level');
                if (!skillBar) return;
                
                // 获取并保存原始宽度值
                let targetWidth;
                
                // 从内联样式获取
                if (skillBar.style && skillBar.style.width) {
                    targetWidth = skillBar.style.width;
                }
                // 从style属性获取
                else if (skillBar.getAttribute('style') && skillBar.getAttribute('style').includes('width:')) {
                    targetWidth = skillBar.getAttribute('style').split('width:')[1].split(';')[0].trim();
                }
                // 从数据属性获取
                else if (skillBar.dataset.width) {
                    targetWidth = skillBar.dataset.width;
                }
                else if (skillBar.dataset.level) {
                    targetWidth = skillBar.dataset.level;
                }
                // 默认值
                else {
                    targetWidth = '70%';
                }
                
                console.log('Target width for skill bar:', targetWidth); // 调试信息
                
                // 先重置为0宽度
                skillBar.style.width = '0%';
                
                // 设置短暂延迟确保DOM更新
                setTimeout(() => {
                    // 添加过渡效果
                    skillBar.classList.add('animating');
                    
                    // 再次延迟以确保过渡类已应用
                    setTimeout(() => {
                        // 设置目标宽度
                        skillBar.style.width = targetWidth;
                        
                        console.log('Setting width to:', targetWidth); // 调试信息
                    }, 50);
                }, 10);
            }
            
            // 获取并观察所有技能项
            const skillItems = document.querySelectorAll('.skill-item');
            skillItems.forEach(item => {
                skillItemObserver.observe(item);
            });
        });
    </script>
    
    <!-- Final Section -->
    <section class="final-section">
        <div class="awesome-together">
            <h2>LET'S MAKE SOMETHING <span class="highlight">AWESOME</span> TOGETHER</h2>
        </div>
        <div class="contact-container">
            <div class="social-buttons">
                <a href="#" class="plain-text">Instagram</a>
                <a href="#" class="plain-text">LinkedIn</a>
                <a href="#" class="plain-text">YouTube</a>
                <a href="#" class="plain-text">TikTok</a>
            </div>
            <div class="email-info">
                <p>z.zhengyuanZhao@gmail.com</p>
            </div>
        </div>
    </section>
    
    <script>
        // 确保logo总是保持pointer光标
        document.addEventListener('DOMContentLoaded', function() {
            const logoElement = document.querySelector('.logo');
            if (logoElement) {
                logoElement.style.cursor = 'pointer';
                
                // 添加鼠标进入和离开事件监听器来强制设置光标
                logoElement.addEventListener('mouseenter', function() {
                    this.style.cursor = 'pointer';
                });
                
                logoElement.addEventListener('mousemove', function() {
                    this.style.cursor = 'pointer';
                });
            }
            
            // 设置当前页面的导航链接为激活状态
            function setActiveNavLink() {
                // 获取当前页面的文件名
                const currentPage = window.location.pathname.split('/').pop() || 'index.html';
                console.log("Current page:", currentPage); // 调试输出
                
                // 获取所有导航链接
                const navLinks = document.querySelectorAll('.nav-links a');
                
                // 遍历链接，找到对应当前页面的链接添加active类
                navLinks.forEach(link => {
                    // 获取链接的href属性
                    const href = link.getAttribute('href');
                    console.log("Checking link:", href); // 调试输出
                    
                    // 特殊处理About ME.html页面
                    if (currentPage.includes("About") && currentPage.includes("ME") && 
                        href.includes("About") && href.includes("ME")) {
                        link.classList.add('active');
                    }
                    // 特殊处理Contact.html页面
                    else if (currentPage.includes("Contact") && href.includes("Contact")) {
                        link.classList.add('active');
                    }
                    // 特殊处理works.html页面
                    else if (currentPage.includes("works") && href.includes("works")) {
                        link.classList.add('active');
                    }
                    // 处理主页
                    else if ((currentPage === 'index.html' || currentPage === '' || currentPage === '/') && 
                            (href === '#' || href === 'index.html')) {
                        link.classList.add('active');
                    }
                    // 处理其他页面
                    else if (href === currentPage) {
                        link.classList.add('active');
                    } else {
                        link.classList.remove('active');
                    }
                });
                
                // 确保主页链接在index页面时激活
                if (currentPage === 'index.html' || currentPage === '' || currentPage === '/') {
                    const homeLink = document.querySelector('.nav-links a[href="#"]');
                    if (homeLink) homeLink.classList.add('active');
                }
            }
            
            // 页面加载时执行
            document.addEventListener('DOMContentLoaded', function() {
                setActiveNavLink();
                
                // 添加Home链接的滚动到顶部功能
                const homeLink = document.querySelector('.nav-links a[href="#"]');
                if (homeLink) {
                    homeLink.addEventListener('click', function(e) {
                        e.preventDefault();
                        // 使用GSAP平滑滚动到顶部
                        gsap.to(window, {
                            duration: 1.5,
                            scrollTo: 0,
                            ease: "power2.inOut"
                        });
                    });
                }
                
                // 添加Logo的滚动到顶部功能
                const logoElement = document.querySelector('.logo');
                if (logoElement) {
                    logoElement.addEventListener('click', function(e) {
                        e.preventDefault();
                        // 使用GSAP平滑滚动到顶部
                        gsap.to(window, {
                            duration: 1.5,
                            scrollTo: 0,
                            ease: "power2.inOut"
                        });
                    });
                }
            });
        });

        // Responsive animation handler - Debounced resize for Z's World
        let resizeTimeout;
        const handleWorldResize = () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                requestAnimationFrame(() => {
                    // Recalculate animations for main world title
                    const mainWorldTitle = document.querySelector('.world-title');
                    if (mainWorldTitle) {
                        const mainChars = mainWorldTitle.querySelectorAll('.char');
                        gsap.killTweensOf(mainChars);
                        startDefaultWaveEffect(mainChars, mainWorldTitle);
                    }
                    
                    // Recalculate animations for name-container world title
                    const nameWorldTitle = document.querySelector('.name-container .world');
                    if (nameWorldTitle) {
                        const nameChars = nameWorldTitle.querySelectorAll('.char');
                        gsap.killTweensOf(nameChars);
                        startBreathingAnimation(nameChars, nameWorldTitle);
                    }
                    
                    // Recalculate animations for cover world title if visible
                    const coverWorldTitle = document.querySelector('.cover-name-container .world');
                    if (coverWorldTitle && coverWorldTitle.offsetParent !== null) {
                        const coverChars = coverWorldTitle.querySelectorAll('.char');
                        gsap.killTweensOf(coverChars);
                        startBreathingAnimation(coverChars, coverWorldTitle);
                    }
                });
            }, 100);
        };

        // Add resize listener for responsive animations
        window.addEventListener('resize', handleWorldResize);
    </script>
</body>
</html> 