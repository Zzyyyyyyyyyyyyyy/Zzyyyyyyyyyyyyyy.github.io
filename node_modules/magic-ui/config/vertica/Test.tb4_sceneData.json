{
  "module": "Test.tb4_sceneData",
  "flag": "vertical",
  "configs": [
    {
      "key": "Test.tb4_sceneData",
      "desc": "LTE室内外场景分析",
      "config": {
        "parameters": [
          {
            "name": "p_en",
            "columnname": "",
            "type": "string",
            "format": "",
            "conditionid": "c0",
            "symbol": ""
          },
          {
            "name": "starttime",
            "columnname": "",
            "type": "string",
            "format": "",
            "conditionid": "c1",
            "symbol": ""
          },
          {
            "name": "endtime",
            "columnname": "",
            "type": "string",
            "format": "",
            "conditionid": "c2",
            "symbol": ""
          },
          {
            "name": "scenename",
            "columnname": "",
            "type": "string",
            "format": "",
            "conditionid": "c3",
            "symbol": ""
          },
          {
            "name": "fieldname",
            "columnname": "",
            "type": "string",
            "format": "",
            "conditionid": "c4",
            "symbol": ""
          },
          {
            "name": "scenevalue",
            "columnname": "",
            "type": "string",
            "format": "",
            "conditionid": "c5",
            "symbol": ""
          }, {
            "name": "province",
            "columnname": "",
            "type":"string",
            "format": "",
            "conditionid": "c6",
            "symbol":""
          }
        ],
        "value": "SELECT DISTINCT      '[@c6]' AS data1,      '[@c3]' AS data2,      0          data3,      0          data4,      0          data5,      0          data6,      0          data49,      0          data50,      t.*  FROM      (          SELECT              t4.data7,              t4.data8,              t4.data9,              t4.data10,              t4.data11,              t4.data12,              t4.data13,              t4.data14,              t4.data15,              t4.data16,              t4.data17,              t4.data18,              t4.data19,              t4.data20,              t4.data21,              t4.data22,              t4.data23,              t4.data24,              t4.data25,              t4.data26,              t4.data27,              t4.data28,              t4.data29,              t4.data30,              t4.data31,              t4.data32,              t4.data33,              t4.data34,              t4.data35,              t4.data36,              t4.data37,              t4.data38,              t4.data39,              t4.data40,              t4.data41,              t4.data42,              t4.data43,              t4.data44,              t4.data45,              t4.data46,              t4.data47,              t4.data48,              t5.data53,              t5.data54,              t5.data55,              t5.data56,              t5.data57,              t5.data58,              t5.data59,              t5.data60,              t5.data61,              t5.data62,              t5.data63,              t5.data64,              t5.data65,              t5.data66,              t5.data67,              t5.data68,              t5.data69,              t5.data70,              t5.data71,              t5.data72,              t5.data73,              t5.data74,              t5.data75,              t5.data76,              t5.data77,              t5.data78,              t5.data79,              t5.data80,              t5.data81,              t5.data82,              t5.data83          FROM              (                  SELECT                      '[@c3]' AS data2,                      SUM(                          CASE                              WHEN nettype=1                              THEN xdr_count                              ELSE 0                          END) AS data7,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN xdr_count                              ELSE 0                          END)/MAX(tb1.sumcnt),2.0) AS data8 ,                      SUM(                          CASE                              WHEN nettype=2                              THEN xdr_count                              ELSE 0                          END) AS data9,                      ROUND(SUM(                          CASE                              WHEN nettype=2                              THEN xdr_count                              ELSE 0                          END)/MAX(tb1.sumcnt),2.0) AS data10 ,                      SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END) AS data11,                      ROUND( SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END)/MAX(tb1.sumdelay),2.0) AS data12 ,                      SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END) AS data13,                      ROUND( SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END)/MAX(tb1.sumdelay),2.0) AS data14 ,                      SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END) AS data15,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END)/MAX(tb1.sumdl_flow) ,2.0)AS data16 ,                      SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END) AS data17,                      ROUND( SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END)/MAX(tb1.sumdl_flow),2.0) AS data18 ,                      SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END) AS data19,                      SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END) AS data20 ,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END)*8000/1024,2.0) AS data21,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data22,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END) AS data23 ,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data24,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data25,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_speed_xdr_count                              ELSE 0                          END) AS data26 ,                      ROUND( SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data27,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_sucess_xdr_count*satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count*satisfied_xdr_count                              ELSE 0                          END),2.0) AS data28,                      SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END) AS data29,                      SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END) AS data30,                      ROUND(SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END)*8000/1024,2.0) AS data31,                      SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data32,                      SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END) AS data33 ,                      ROUND( SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_xdr_count                              ELSE 0                          END) ,2.0)AS data34,                      SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data35,                      SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_speed_xdr_count                              ELSE 0                          END) AS data36 ,                      ROUND(SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_xdr_count                              ELSE 0                          END) ,2.0)AS data37,                      ROUND(SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_sucess_xdr_count*satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=2                              THEN satisfied_xdr_count*satisfied_xdr_count                              ELSE 0                          END),2.0) AS data38,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN delay                              ELSE 0                          END) AS data39,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN dl_flow                              ELSE 0                          END) AS data40,                      ROUND(SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN dl_flow                              ELSE 0                          END)/SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN delay                              ELSE 0                          END)*8000/1024,2.0) AS data41,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data42,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END) AS data43 ,                      ROUND( SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN(nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data44,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data45,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_speed_xdr_count                              ELSE 0                          END) AS data46 ,                      ROUND( SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data47,                      ROUND(SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_sucess_xdr_count*satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count*satisfied_xdr_count                              ELSE 0                          END),2.0) AS data48                  FROM                      lte_sys.[@c0]_T_QUALITYSTATISTICS_ALLUSER tb2 ,                      (                          SELECT                              SUM(xdr_count) sumcnt,                              SUM(delay)     sumdelay,                              SUM(dl_flow)   sumdl_flow                          FROM                              lte_sys.[@c0]_T_QUALITYSTATISTICS_ALLUSER tt                          WHERE                              tt.nettype IN (1,2)                          AND tt.hour>='[@c1]'                          AND tt.hour<='[@c2]'                          AND tt.[@c4])tb1                  WHERE                      tb2.hour>='[@c1]'                  AND tb2.hour<='[@c2]'                  AND tb2.[@c4])t4          LEFT JOIN              (                  SELECT                      '[@c3]' AS data2,                      SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END) AS data53,                      ROUND( SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END)/MAX(tb1.sumdelay),2.0) AS data54 ,                      SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END) AS data55,                      ROUND(SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END)/MAX(tb1.sumdelay),2.0) AS data56 ,                      SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END) AS data57,                      ROUND( SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END)/MAX(tb1.sumdl_flow),2.0) AS data58 ,                      SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END) AS data59,                      ROUND(SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END)/MAX(tb1.sumdl_flow),2.0) AS data60 ,                      SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END) AS data61,                      SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END) AS data62 ,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN dl_flow                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN delay                              ELSE 0                          END)*8000/1024,2.0) AS data63,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data64,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END) AS data65 ,                      ROUND( SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data66,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data67,                      SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_speed_xdr_count                              ELSE 0                          END) AS data68 ,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data69,                      ROUND(SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_sucess_xdr_count*satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count*satisfied_xdr_count                              ELSE 0                          END),2.0) AS data70,                      SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END) AS data71,                      SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END) AS data72,                      ROUND( SUM(                          CASE                              WHEN nettype=2                              THEN dl_flow                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=2                              THEN delay                              ELSE 0                          END)*8000/1024,2.0) AS data73,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN delay                              ELSE 0                          END) AS data74,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN dl_flow                              ELSE 0                          END) AS data75,                      ROUND(SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN dl_flow                              ELSE 0                          END)/SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN delay                              ELSE 0                          END)*8000/1024,2.0) AS data76,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data77,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END) AS data78 ,                      ROUND( SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_sucess_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END),2.0) AS data79,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END) AS data80,                      SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_speed_xdr_count                              ELSE 0                          END) AS data81 ,                      ROUND( SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_xdr_count                              ELSE 0                          END) ,2.0)AS data82,                      ROUND( SUM(                          CASE                              WHEN (nettype=1                                  OR  nettype=2)                              THEN satisfied_sucess_xdr_count*satisfied_speed_xdr_count                              ELSE 0                          END)/SUM(                          CASE                              WHEN nettype=1                              THEN satisfied_xdr_count*satisfied_xdr_count                              ELSE 0                          END),2.0) AS data83                  FROM                      lte_sys.[@c0]_T_QUALITYSTATISTICS_SHAREUSER tb2 ,                      (                          SELECT                              SUM(xdr_count) sumcnt,                              SUM(delay)     sumdelay,                              SUM(dl_flow)   sumdl_flow                          FROM                              lte_sys.[@c0]_T_QUALITYSTATISTICS_SHAREUSER tt                          WHERE                              tt.nettype IN (1,2)                          AND tt.hour>='[@c1]'                          AND tt.hour<='[@c2]'                          AND tt.[@c4])tb1                  WHERE                      tb2.hour>='[@c1]'                  AND tb2.hour<='[@c2]'                  AND tb2.[@c4])t5          ON              t4.data2=t5.data2)T"
      }
    }
  ]
}